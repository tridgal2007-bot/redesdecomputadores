<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Como Funcionam Redes de Computadores — Interativo</title>
  <style>
    /* Estilo base */
    :root{--bg:#0f1724;--card:#0b1220;--accent:#4f46e5;--glass:rgba(255,255,255,0.04);--muted:#9aa4b2}
    *{box-sizing:border-box;font-family:Inter,Segoe UI,Roboto,Arial;margin:0;padding:0}
    body{background:linear-gradient(180deg,#071428 0%, #071730 60%);color:#e6eef8;min-height:100vh;padding:28px}
    .wrap{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:1fr 360px;gap:24px;align-items:start}
    header{grid-column:1/-1;margin-bottom:12px}
    h1{font-size:20px;margin-bottom:6px}
    p.lead{color:var(--muted);margin-bottom:6px}

    /* Card */
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.03)}

    /* Left column content */
    .content .section{margin-bottom:14px}
    .tabs{display:flex;gap:8px;margin-bottom:10px}
    .tab{padding:8px 10px;border-radius:8px;cursor:pointer;background:transparent;border:1px solid transparent;color:var(--muted)}
    .tab.active{background:var(--glass);border-color:rgba(255,255,255,0.06);color:#e6eef8}

    /* Canvas / simulator */
    #sim{height:360px;background:linear-gradient(180deg,#041029,#071427);border-radius:10px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
    .node{width:72px;height:72px;border-radius:12px;background:linear-gradient(180deg,#0b1526,#0a1a2e);display:flex;flex-direction:column;align-items:center;justify-content:center;border:1px solid rgba(255,255,255,0.04);position:absolute;cursor:pointer}
    .node .label{font-size:12px;margin-top:6px;color:var(--muted)}
    svg.packet{position:absolute;width:14px;height:14px}

    /* Right column (quiz) */
    #quiz header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
    .question{font-weight:600;margin-bottom:8px}
    .answers{display:grid;gap:8px}
    .answer{padding:10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);cursor:pointer}
    .answer.correct{border-color:rgba(34,197,94,0.6);background:rgba(34,197,94,0.06)}
    .answer.wrong{border-color:rgba(239,68,68,0.6);background:rgba(239,68,68,0.06)}
    .muted{color:var(--muted);font-size:13px}
    .small{font-size:13px}

    /* Controls */
    .controls{display:flex;gap:8px;margin-top:10px}
    button.btn{background:var(--accent);border:none;color:white;padding:8px 12px;border-radius:8px;cursor:pointer}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}

    /* Responsive */
    @media (max-width:980px){.wrap{grid-template-columns:1fr;}.card{padding:14px}}
  </style>
</head>
<body>
  <header>
    <h1>Como Funcionam Redes de Computadores</h1>
    <p class="lead">TESTE 650000</p>
  </header>

  <main class="wrap">
    <section class="card content">
      <div class="section">
        <div class="tabs" role="tablist">
          <button class="tab active" data-tab="o-que">Como funciona uma rede?</button>
          <button class="tab" data-tab="camadas">Camadas (TCP/IP)</button>
          <button class="tab" data-tab="topologias">Topologias</button>
        </div>
        <div id="o-que" class="tabpanel">
          <h3>Como funciona uma rede?</h3>
          <p class="muted">Uma rede de computadores conecta dispositivos para que troquem dados. Isso envolve hardware (cabos, switches, roteadores), protocolos (regras de comunicação) e serviços (DNS, HTTP, etc.).</p>
        </div>
        <div id="camadas" class="tabpanel" style="display:none">
          <h3>Camadas do modelo TCP/IP</h3>
          <ol class="muted">
            <li><strong>Aplicação:</strong> protocolos como HTTP, SMTP.</li>
            <li><strong>Transporte:</strong> TCP/UDP (controle de fluxo, confiabilidade).</li>
            <li><strong>Internet:</strong> IP (endereçamento e roteamento).</li>
            <li><strong>Link:</strong> Ethernet, Wi‑Fi (transmissão local).</li>
          </ol>
        </div>
        <div id="topologias" class="tabpanel" style="display:none">
          <h3>Topologias comuns</h3>
          <p class="muted">Ponto-a-ponto, barramento, estrela (mais comum), malha. Cada topologia tem trade-offs em custo, redundância e complexidade.</p>
        </div>
      </div>

      <div class="section">
        <h3>Simulador simples</h3>
        <p class="muted small">Clique em um nó para ver informações. Clique em "Enviar pacote" para animar um pacote entre nós.</p>
        <div id="sim" aria-label="Simulador de rede">
          <!-- nodes serão inseridos por JS -->
        </div>
        <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
          <select id="from" class="muted small"></select>
          <select id="to" class="muted small"></select>
          <button id="send" class="btn">Enviar pacote</button>
          <button id="random" class="ghost">Aleatório</button>
        </div>
      </div>

      <div class="section">
        <h3>Conceitos rápidos</h3>
        <ul class="muted">
          <li><strong>IP:</strong> endereço lógico (ex: 192.168.1.5).</li>
          <li><strong>MAC:</strong> endereço de hardware do adaptador de rede.</li>
          <li><strong>Roteador:</strong> conecta redes diferentes e encaminha pacotes.</li>
          <li><strong>Switch:</strong> conecta dispositivos numa mesma rede local.</li>
        </ul>
      </div>
    </section>

    <aside class="card" id="quiz">
      <header>
        <div>
          <div class="muted small">Quiz</div>
          <div id="score">Pontuação: 0 / 5</div>
        </div>
        <div class="muted small">Progresso: <span id="progress">0%</span></div>
      </header>

      <div id="qbox">
        <!-- Perguntas geradas por JS -->
      </div>

      <div class="controls">
        <button id="next" class="btn">Próxima</button>
        <button id="restart" class="ghost">Reiniciar</button>
      </div>
    </aside>
  </main>

  <script>
    /* === Tabs simples === */
    document.querySelectorAll('.tab').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.tabpanel').forEach(tp=>tp.style.display='none');
        document.getElementById(btn.dataset.tab).style.display='block';
      })
    });

    /* === Simulador: cria nós, posições e animação de pacote === */
    const sim = document.getElementById('sim');
    const nodes = [
      {id:'pc1', label:'PC 1', ip:'192.168.1.2', x:60, y:40},
      {id:'pc2', label:'PC 2', ip:'192.168.1.3', x:260, y:60},
      {id:'server', label:'Servidor', ip:'192.168.1.10', x:170, y:220},
      {id:'router', label:'Roteador', ip:'192.168.1.1', x:420, y:120}
    ];

    function createNodes(){
      sim.innerHTML='';
      nodes.forEach(n=>{
        const el=document.createElement('div');
        el.className='node';
        el.style.left=n.x+'px';
        el.style.top=n.y+'px';
        el.dataset.id=n.id;
        el.innerHTML=`<strong>${n.label}</strong><div class="label">${n.ip}</div>`;
        el.addEventListener('click',()=>{
          alert(n.label+"\nIP: "+n.ip+"\nMAC: 00:1A:2B:3C:"+n.id.slice(-2));
        });
        sim.appendChild(el);
      });
    }
    createNodes();

    // popula selects
    const fromSel = document.getElementById('from');
    const toSel = document.getElementById('to');
    nodes.forEach(n=>{const o=document.createElement('option');o.value=n.id;o.textContent=n.label+' ('+n.ip+')';fromSel.appendChild(o);});
    nodes.forEach(n=>{const o=document.createElement('option');o.value=n.id;o.textContent=n.label+' ('+n.ip+')';toSel.appendChild(o);});

    function sendPacket(fromId,toId){
      const from = nodes.find(n=>n.id===fromId);
      const to = nodes.find(n=>n.id===toId);
      if(!from||!to){alert('Selecione nós válidos');return}
      // criar elemento packet
      const p = document.createElementNS('http://www.w3.org/2000/svg','svg');
      p.classList.add('packet');
      p.setAttribute('viewBox','0 0 24 24');
      p.style.left = (from.x+32)+'px';
      p.style.top  = (from.y+32)+'px';
      p.innerHTML = '<circle cx="12" cy="12" r="6" fill="white" opacity="0.9"/>';
      sim.appendChild(p);
      // animação simples por requestAnimationFrame
      const startX = from.x+32, startY = from.y+32;
      const endX = to.x+32, endY = to.y+32;
      const dx = endX-startX, dy = endY-startY;
      let t=0; const dur=800; const start = performance.now();
      // mostra rapida info
      const info = document.createElement('div'); info.className='muted small'; info.style.position='absolute'; info.style.left='10px'; info.style.bottom='8px'; info.textContent = `Enviando de ${from.label} → ${to.label}`;
      sim.appendChild(info);
      function step(now){
        t = (now-start)/dur;
        if(t>1) t=1;
        p.style.left = (startX + dx*t) + 'px';
        p.style.top  = (startY + dy*t) + 'px';
        if(t<1) requestAnimationFrame(step);
        else{ // chegou
          sim.removeChild(p);
          sim.removeChild(info);
          const msg = document.createElement('div'); msg.className='muted small'; msg.style.position='absolute'; msg.style.right='10px'; msg.style.bottom='8px'; msg.textContent = 'Pacote entregue ✓';
          sim.appendChild(msg);
          setTimeout(()=>{ if(sim.contains(msg)) sim.removeChild(msg); },900);
        }
      }
      requestAnimationFrame(step);
    }

    document.getElementById('send').addEventListener('click',()=>{
      sendPacket(fromSel.value,toSel.value);
    });
    document.getElementById('random').addEventListener('click',()=>{
      const a = nodes[Math.floor(Math.random()*nodes.length)];
      let b = nodes[Math.floor(Math.random()*nodes.length)];
      while(b.id===a.id) b = nodes[Math.floor(Math.random()*nodes.length)];
      fromSel.value = a.id; toSel.value = b.id;
      sendPacket(a.id,b.id);
    });

    /* === Quiz (5 perguntas) === */
    const quiz = [
      {q:'Qual protocolo é responsável por atribuir endereços IP dinamicamente?', a:['DNS','DHCP','FTP','ARP'], correct:1, explain:'DHCP atribui IPs dinamicamente.'},
      {q:'Qual camada do modelo TCP/IP cuida do roteamento entre redes?', a:['Link','Internet','Transporte','Aplicação'], correct:1, explain:'A camada Internet (IP) faz o roteamento.'},
      {q:'O que um switch faz na rede local?', a:['Roteia entre redes','Encaminha quadros entre portas','Traduz nomes de domínio','Criptografa tráfego'], correct:1, explain:'Switch encaminha quadros entre portas usando MAC.'},
      {q:'Qual protocolo garante entrega confiável e ordenada de bytes?', a:['UDP','ICMP','TCP','ARP'], correct:2, explain:'TCP fornece confiabilidade e ordenação.'},
      {q:'Em redes domésticas, qual dispositivo normalmente conecta sua rede à internet?', a:['Switch','Roteador','Servidor DNS','Bridge'], correct:1, explain:'O roteador conecta e encaminha tráfego para a internet.'}
    ];

    let state = {index:0,score:0,answered:false};
    const qbox = document.getElementById('qbox');
    const scoreEl = document.getElementById('score');
    const progressEl = document.getElementById('progress');

    function renderQuestion(){
      const cur = quiz[state.index];
      qbox.innerHTML = `
        <div class="question">${state.index+1}. ${cur.q}</div>
        <div class="answers">${cur.a.map((ans,i)=>`<button class="answer" data-i="${i}">${ans}</button>`).join('')}</div>
        <div id="explain" class="muted" style="margin-top:8px;display:none"></div>
      `;
      state.answered=false;
      // add listeners
      qbox.querySelectorAll('.answer').forEach(btn=>{
        btn.addEventListener('click',(e)=>{
          if(state.answered) return;
          const chosen = Number(btn.dataset.i);
          state.answered=true;
          const all = qbox.querySelectorAll('.answer');
          all.forEach(a=>a.classList.add('disabled'));
          if(chosen===cur.correct){
            btn.classList.add('correct'); state.score++;
          } else { btn.classList.add('wrong'); all[cur.correct].classList.add('correct'); }
          document.getElementById('explain').textContent = cur.explain; document.getElementById('explain').style.display='block';
          updateScore();
        })
      });
      updateProgress();
    }

    function updateScore(){ scoreEl.textContent = `Pontuação: ${state.score} / ${quiz.length}`; }
    function updateProgress(){ const pct = Math.round((state.index/quiz.length)*100); progressEl.textContent = pct + '%'; }

    document.getElementById('next').addEventListener('click',()=>{
      if(!state.answered){ alert('Responda antes de avançar.'); return; }
      if(state.index < quiz.length-1){ state.index++; renderQuestion(); }
      else { // final
        qbox.innerHTML = `<div class="question">Fim do quiz — Sua pontuação: ${state.score} / ${quiz.length}</div><div class="muted" style="margin-top:8px">Obrigado por testar! Use "Reiniciar" para tentar novamente.</div>`;
        progressEl.textContent = '100%';
      }
    });

    document.getElementById('restart').addEventListener('click',()=>{
      state = {index:0,score:0,answered:false}; updateScore(); renderQuestion();
    });

    // inicializa
    updateScore(); renderQuestion();

    /* Acessibilidade extra: tecla Enter para enviar paquete quando sim focado */
    document.addEventListener('keydown',(e)=>{ if(e.key==='Enter' && document.activeElement && (document.activeElement.id==='from' || document.activeElement.id==='to')){ sendPacket(fromSel.value,toSel.value); } });

  </script>
</body>
</html>
