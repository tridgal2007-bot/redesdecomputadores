<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0d1525" />
  <title>História das Redes de Computadores</title>
  <!-- Fontes premium -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Ícones premium -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ---------- PALETA AZUL PREMIUM (PADRÃO) - CORES MAIS SUAVES ---------- */
    :root {
      --bg-900: #0a1420;
      --bg-gradient: linear-gradient(160deg, #0a0e17 0%, #0d1525 35%, #121c33 70%, #1a2540 100%);
      --card-bg: rgba(18, 28, 51, 0.75);
      --card-border: rgba(173, 216, 230, 0.12);
      --accent: #4fc3f7;
      --accent-light: #b3e5fc;
      --text-primary: #f8f9fa;
      --text-secondary: #d1e8e2;
      --success: #4ade80;
      --warning: #fbbf24;
      --error: #f87171;
      --timeline-bg: rgba(79, 195, 247, 0.06);
      --timeline-progress: linear-gradient(90deg, var(--accent-light), var(--accent));
      --glow: 0 0 16px rgba(79, 195, 247, 0.25);
      --transition: all 0.28s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      --warp-bg: radial-gradient(circle at center, rgba(79, 195, 247, 0.25) 0%, rgba(79, 195, 247, 0.12) 30%, rgba(0, 0, 0, 0.92) 100%);
      --warp-conic: conic-gradient(from 0deg, transparent, var(--accent-light), transparent);
      --confetti-colors: '#4fc3f7,#b3e5fc,#d1e8e2';
    }
    /* Tema Vermelho Suavizado */
    :root.theme-red {
      --bg-900: #1a0d0d;
      --bg-gradient: linear-gradient(160deg, #1a0d0d 0%, #2c1818 35%, #3d2222 70%, #501616 100%);
      --card-bg: rgba(26, 13, 13, 0.75);
      --card-border: rgba(244, 143, 143, 0.12);
      --accent: #ef9a9a;
      --accent-light: #ffcdd2;
      --text-primary: #fff8f8;
      --text-secondary: #f8bbd9;
      --success: #4ade80;
      --warning: #fbbf24;
      --error: #f87171;
      --timeline-bg: rgba(239, 154, 154, 0.06);
      --timeline-progress: linear-gradient(90deg, var(--accent-light), var(--accent));
      --glow: 0 0 16px rgba(239, 154, 154, 0.25);
      --warp-bg: radial-gradient(circle at center, rgba(239, 154, 154, 0.25) 0%, rgba(239, 154, 154, 0.12) 30%, rgba(0, 0, 0, 0.92) 100%);
      --warp-conic: conic-gradient(from 0deg, transparent, var(--accent-light), transparent);
      --confetti-colors: '#ef9a9a,#ffcdd2,#fff8f8';
    }
    /* Tema Verde Suavizado */
    :root.theme-green {
      --bg-900: #0f1a0f;
      --bg-gradient: linear-gradient(160deg, #0f1a0f 0%, #1a281a 35%, #254a25 70%, #306d30 100%);
      --card-bg: rgba(15, 26, 15, 0.75);
      --card-border: rgba(144, 238, 144, 0.12);
      --accent: #a5d6a7;
      --accent-light: #e8f5e8;
      --text-primary: #f1f8e9;
      --text-secondary: #c8e6c9;
      --success: #4ade80;
      --warning: #fbbf24;
      --error: #f87171;
      --timeline-bg: rgba(165, 214, 167, 0.06);
      --timeline-progress: linear-gradient(90deg, var(--accent-light), var(--accent));
      --glow: 0 0 16px rgba(165, 214, 167, 0.25);
      --warp-bg: radial-gradient(circle at center, rgba(165, 214, 167, 0.25) 0%, rgba(165, 214, 167, 0.12) 30%, rgba(0, 0, 0, 0.92) 100%);
      --warp-conic: conic-gradient(from 0deg, transparent, var(--accent-light), transparent);
      --confetti-colors: '#a5d6a7,#e8f5e8,#f1f8e9';
    }
    /* Tema Roxo Suavizado */
    :root.theme-purple {
      --bg-900: #1a0f1f;
      --bg-gradient: linear-gradient(160deg, #1a0f1f 0%, #2a1a2f 35%, #3d2744 70%, #501659 100%);
      --card-bg: rgba(26, 15, 31, 0.75);
      --card-border: rgba(221, 160, 221, 0.12);
      --accent: #ce93d8;
      --accent-light: #f3e5f5;
      --text-primary: #fafafa;
      --text-secondary: #e1bee7;
      --success: #4ade80;
      --warning: #fbbf24;
      --error: #f87171;
      --timeline-bg: rgba(206, 147, 216, 0.06);
      --timeline-progress: linear-gradient(90deg, var(--accent-light), var(--accent));
      --glow: 0 0 16px rgba(206, 147, 216, 0.25);
      --warp-bg: radial-gradient(circle at center, rgba(206, 147, 216, 0.25) 0%, rgba(206, 147, 216, 0.12) 30%, rgba(0, 0, 0, 0.92) 100%);
      --warp-conic: conic-gradient(from 0deg, transparent, var(--accent-light), transparent);
      --confetti-colors: '#ce93d8,#f3e5f5,#fafafa';
    }
    /* Tema Laranja Suavizado */
    :root.theme-orange {
      --bg-900: #2c1608;
      --bg-gradient: linear-gradient(160deg, #2c1608 0%, #3d1f0e 35%, #582919 70%, #723424 100%);
      --card-bg: rgba(44, 22, 8, 0.75);
      --card-border: rgba(255, 218, 185, 0.12);
      --accent: #ffb74d;
      --accent-light: #fff8e1;
      --text-primary: #fffde7;
      --text-secondary: #ffe0b2;
      --success: #4ade80;
      --warning: #fbbf24;
      --error: #f87171;
      --timeline-bg: rgba(255, 183, 77, 0.06);
      --timeline-progress: linear-gradient(90deg, var(--accent-light), var(--accent));
      --glow: 0 0 16px rgba(255, 183, 77, 0.25);
      --warp-bg: radial-gradient(circle at center, rgba(255, 183, 77, 0.25) 0%, rgba(255, 183, 77, 0.12) 30%, rgba(0, 0, 0, 0.92) 100%);
      --warp-conic: conic-gradient(from 0deg, transparent, var(--accent-light), transparent);
      --confetti-colors: '#ffb74d,#fff8e1,#fffde7';
    }
    /* Tema Rosa Suavizado */
    :root.theme-pink {
      --bg-900: #1f0a1a;
      --bg-gradient: linear-gradient(160deg, #1f0a1a 0%, #2f0f25 35%, #42153a 70%, #541b4f 100%);
      --card-bg: rgba(31, 10, 26, 0.75);
      --card-border: rgba(255, 182, 193, 0.12);
      --accent: #f8bbd9;
      --accent-light: #fce4ec;
      --text-primary: #fdf2f8;
      --text-secondary: #f8bbd9;
      --success: #4ade80;
      --warning: #fbbf24;
      --error: #f87171;
      --timeline-bg: rgba(248, 187, 217, 0.06);
      --timeline-progress: linear-gradient(90deg, var(--accent-light), var(--accent));
      --glow: 0 0 16px rgba(248, 187, 217, 0.25);
      --warp-bg: radial-gradient(circle at center, rgba(248, 187, 217, 0.25) 0%, rgba(248, 187, 217, 0.12) 30%, rgba(0, 0, 0, 0.92) 100%);
      --warp-conic: conic-gradient(from 0deg, transparent, var(--accent-light), transparent);
      --confetti-colors: '#f8bbd9,#fce4ec,#fdf2f8';
    }
    /* Tema Ciano Suavizado */
    :root.theme-teal {
      --bg-900: #0a1f1f;
      --bg-gradient: linear-gradient(160deg, #0a1f1f 0%, #0f2a2a 35%, #144040 70%, #195555 100%);
      --card-bg: rgba(10, 31, 31, 0.75);
      --card-border: rgba(175, 238, 238, 0.12);
      --accent: #80deea;
      --accent-light: #e0f2f1;
      --text-primary: #f0f9ff;
      --text-secondary: #b2dfdb;
      --success: #4ade80;
      --warning: #fbbf24;
      --error: #f87171;
      --timeline-bg: rgba(128, 222, 234, 0.06);
      --timeline-progress: linear-gradient(90deg, var(--accent-light), var(--accent));
      --glow: 0 0 16px rgba(128, 222, 234, 0.25);
      --warp-bg: radial-gradient(circle at center, rgba(128, 222, 234, 0.25) 0%, rgba(128, 222, 234, 0.12) 30%, rgba(0, 0, 0, 0.92) 100%);
      --warp-conic: conic-gradient(from 0deg, transparent, var(--accent-light), transparent);
      --confetti-colors: '#80deea,#e0f2f1,#f0f9ff';
    }
    /* Tema Preto e Branco (Cinza Escala) Suavizado */
    :root.theme-grayscale {
      --bg-900: #000000;
      --bg-gradient: linear-gradient(160deg, #000000 0%, #111111 35%, #222222 70%, #333333 100%);
      --card-bg: rgba(0, 0, 0, 0.75);
      --card-border: rgba(211, 211, 211, 0.06);
      --accent: #e0e0e0;
      --accent-light: #f5f5f5;
      --text-primary: #ffffff;
      --text-secondary: #d3d3d3;
      --success: #4ade80;
      --warning: #fbbf24;
      --error: #f87171;
      --timeline-bg: rgba(224, 224, 224, 0.03);
      --timeline-progress: linear-gradient(90deg, var(--accent-light), var(--accent));
      --glow: 0 0 16px rgba(224, 224, 224, 0.15);
      --warp-bg: radial-gradient(circle at center, rgba(224, 224, 224, 0.15) 0%, rgba(224, 224, 224, 0.08) 30%, rgba(0, 0, 0, 0.92) 100%);
      --warp-conic: conic-gradient(from 0deg, transparent, var(--accent-light), transparent);
      --confetti-colors: '#e0e0e0,#f5f5f5,#d3d3d3';
    }
    /* Reduced motion preference */
    @media (prefers-reduced-motion: reduce) {
      :root { --transition: none; }
      * { transition: none !important; animation: none !important; }
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100vh; margin: 0; background: var(--bg-gradient); color: var(--text-secondary); font-family: 'Space Grotesk', 'Montserrat', system-ui, -apple-system, 'Segoe UI', Roboto, Arial; overflow-x: hidden; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; transition: var(--transition); }
    .container { width: 100%; max-width: 1400px; margin: 0 auto; padding: 18px; min-height: 100vh; display: flex; flex-direction: column; }
    header { display: flex; align-items: center; gap: 16px; padding: 12px 0; position: relative; z-index: 10; justify-content: center; }
    .logo { width: 70px; height: 70px; border-radius: 16px; background: linear-gradient(135deg, var(--text-primary), var(--accent)); display: grid; place-items: center; color: var(--bg-900); font-weight: 800; font-size: 20px; box-shadow: var(--glow); transition: var(--transition); flex-shrink: 0; }
    .logo:hover { transform: scale(1.04); }
    .header-content { text-align: center; }
    h1 {
      margin: 0;
      color: var(--accent-light);
      font-size: 22px;
      font-weight: 700;
      letter-spacing: -0.2px;
      text-shadow: 0 0 10px rgba(179, 229, 252, 0.3);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .subtitle { margin-top: 6px; color: var(--text-secondary); font-size: 13px; line-height: 1.4; max-width: 64ch; }
    .controls { display: flex; gap: 10px; align-items: center; margin-left: auto; flex-wrap: wrap; justify-content: flex-end; }
    .btn { background: linear-gradient(90deg, var(--accent-light), var(--accent)); color: var(--bg-900); border: 0; padding: 9px 14px; border-radius: 10px; cursor: pointer; font-weight: 700; font-size: 13px; display: inline-flex; align-items: center; gap: 8px; box-shadow: var(--glow); transition: var(--transition); white-space: nowrap; }
    .btn:hover { transform: translateY(-3px); box-shadow: 0 8px 28px rgba(79,195,247,0.2); }
    .ghost { background: transparent; border: 1px solid var(--card-border); color: var(--text-primary); padding: 8px 12px; border-radius: 10px; cursor: pointer; font-weight: 600; transition: var(--transition); white-space: nowrap; }
    .ghost:hover { background: rgba(173, 216, 230, 0.04); transform: translateY(-1px); }
    .main-content { display: flex; flex-direction: column; gap: 20px; margin-top: 18px; }
    @media (min-width: 992px) { .main-content { flex-direction: row; } }
    .timeline-section, .quiz-section { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 24px; padding: 20px; box-shadow: 0 6px 24px rgba(0, 10, 20, 0.5); backdrop-filter: blur(8px); position: relative; overflow: hidden; width: 100%; }
    .timeline-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap; gap: 10px; }
    .timeline-title { color: var(--text-primary); font-size: 18px; font-weight: 700; }
    .timeline-track { position: relative; height: 120px; margin: 12px 0; display: flex; align-items: center; overflow: hidden; }
    .timeline-line { position: absolute; left: 20px; right: 20px; top: 50%; height: 2px; background: linear-gradient(90deg, rgba(173, 216, 230, 0.06), rgba(79, 195, 247, 0.1)); border-radius: 1px; transform: translateY(-50%); }
    .timeline-events { display: flex; justify-content: flex-start; gap: 20px; width: 100%; padding: 0 20px; position: relative; z-index: 2; overflow-x: auto; padding-bottom: 10px; -ms-overflow-style: none; scrollbar-width: none; }
    .timeline-events::-webkit-scrollbar { display: none; }
    .event { display: flex; flex-direction: column; align-items: center; cursor: pointer; position: relative; transition: var(--transition); flex-shrink: 0; min-width: 70px; padding: 0 8px; }
    .event:focus { outline: 3px solid rgba(173,216,230,0.1); border-radius: 10px; }
    .event:hover { transform: translateY(-6px); }
    .event-dot { width: 24px; height: 24px; border-radius: 50%; background: linear-gradient(135deg, var(--text-primary), var(--accent-light)); display: flex; align-items: center; justify-content: center; margin-bottom: 10px; box-shadow: var(--glow); position: relative; z-index: 2; }
    .event-dot-inner { width: 8px; height: 8px; border-radius: 50%; background: var(--bg-900); }
    .event-year { font-weight: 700; color: var(--text-primary); font-size: 14px; margin-bottom: 4px; text-align: center; }
    .event-name { font-size: 12px; text-align: center; line-height: 1.3; }
    .event.active .event-dot { transform: scale(1.28); box-shadow: 0 0 24px rgba(79, 195, 247, 0.4); }
    .event-details { background: rgba(10, 18, 30, 0.7); border: 1px solid var(--card-border); border-radius: 14px; padding: 16px; margin-top: 14px; opacity: 1; transform: scale(1); transition: opacity 0.5s ease, transform 0.5s ease; }
    .event-year-display { font-weight: 700; color: var(--accent); font-size: 14px; }
    .event-title { color: var(--text-primary); font-size: 18px; font-weight: 700; margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
    .event-description { line-height: 1.7; margin-bottom: 14px; font-size: 14px; color: var(--text-secondary); }
    /* Animação de viagem no tempo futurista aprimorada */
    .time-warp-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: var(--warp-bg);
      background-size: cover;
      background-position: center;
      pointer-events: none;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
      overflow: hidden;
    }
    .time-warp-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    .time-warp-overlay::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: var(--warp-conic);
      animation: warpRotate 1.5s linear infinite;
      opacity: 0.2;
    }
    @keyframes warpRotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .time-warp-grid {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image:
        linear-gradient(rgba(79,195,247,0.08) 1px, transparent 1px),
        linear-gradient(90deg, rgba(79,195,247,0.08) 1px, transparent 1px);
      background-size: 50px 50px;
      animation: gridWarp 2s ease-in-out infinite alternate;
      opacity: 0.4;
    }
    .time-warp-overlay.active .time-warp-grid {
      animation-play-state: running;
    }
    @keyframes gridWarp {
      0% { transform: scale(1) skew(0deg); opacity: 0.2; }
      100% { transform: scale(1.1) skew(2deg); opacity: 0.5; }
    }
    .time-warp-clock {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 140px;
      height: 140px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent-light), var(--accent), rgba(79,195,247,0.6));
      box-shadow:
        0 0 40px rgba(79, 195, 247, 0.6),
        inset 0 0 20px rgba(255,255,255,0.08);
      animation: clockPulse 0.6s ease-in-out infinite alternate;
      opacity: 0;
      border: 2px solid rgba(173,216,230,0.4);
      overflow: visible;
    }
    .time-warp-clock.active {
      opacity: 1;
    }
    .time-warp-clock::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.08) 0%, transparent 70%);
      border-radius: 50%;
    }
    .clock-face {
      position: relative;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: rgba(255,255,255,0.04);
      border: 2px solid rgba(173,216,230,0.2);
    }
    .clock-mark {
      position: absolute;
      left: 50%;
      top: 50%;
      width: 2px;
      height: 20px;
      background: var(--accent-light);
      transform: translate(-50%, -100%) rotate(var(--rotation));
      transform-origin: bottom center;
    }
    .clock-mark.major {
      height: 25px;
      width: 3px;
    }
    .clock-number {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) rotate(var(--rotation)) translateY(-55px) rotate(calc(-1 * var(--rotation)));
      font-weight: 700;
      color: var(--text-primary);
      font-size: 12px;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .clock-center {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 8px;
      height: 8px;
      background: var(--bg-900);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 10px rgba(79,195,247,0.6);
      z-index: 3;
    }
    .clock-hand {
      position: absolute;
      bottom: 50%;
      left: 50%;
      transform: translateX(-50%) rotate(0deg);
      transform-origin: bottom center;
      border-radius: 2px 2px 0 0;
      z-index: 2;
      background: #000;
    }
    .hour-hand {
      width: 4px;
      height: 25px;
      box-shadow: 0 0 5px rgba(0,0,0,0.5);
    }
    .minute-hand {
      width: 3px;
      height: 35px;
      box-shadow: 0 0 5px rgba(0,0,0,0.5);
    }
    .second-hand {
      width: 1px;
      height: 40px;
      box-shadow: 0 0 3px rgba(0,0,0,0.8);
    }
    .time-text {
      position: absolute;
      bottom: -40px;
      left: 50%;
      transform: translateX(-50%);
      color: var(--accent-light);
      font-weight: 700;
      font-size: 14px;
      text-align: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .time-warp-clock.active .time-text {
      opacity: 1;
    }
    @keyframes clockPulse {
      0% { box-shadow: 0 0 40px rgba(79, 195, 247, 0.6), inset 0 0 20px rgba(255,255,255,0.08); transform: translate(-50%, -50%) scale(1); }
      100% { box-shadow: 0 0 60px rgba(79, 195, 247, 0.8), inset 0 0 30px rgba(255,255,255,0.15); transform: translate(-50%, -50%) scale(1.05); }
    }
    .time-warp-clock.active .hour-hand {
      animation: handSpin 12s linear infinite;
    }
    .time-warp-clock.active .minute-hand {
      animation: handSpin 1s linear infinite;
    }
    .time-warp-clock.active .second-hand {
      animation: handSpin 0.1s linear infinite;
    }
    @keyframes handSpin {
      0% { transform: translateX(-50%) rotate(0deg); }
      100% { transform: translateX(-50%) rotate(360deg); }
    }
    .event-details.time-traveling {
      opacity: 0;
      transform: scale(0.95);
    }
    .event-details.emerging {
      animation: emergeFromTime 1s ease-out forwards;
    }
    @keyframes emergeFromTime {
      0% {
        opacity: 0;
        transform: scale(0.7) rotateY(90deg) translateZ(0);
      }
      50% {
        opacity: 0.5;
        transform: scale(0.85) rotateY(45deg) translateZ(20px);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotateY(0deg) translateZ(0);
      }
    }
    /* Partículas futuristas aprimoradas */
    .warp-particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    .warp-particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: var(--accent-light);
      border-radius: 50%;
      opacity: 0;
      animation: particleFloat 2s ease-out forwards;
    }
    @keyframes particleFloat {
      0% {
        opacity: 0;
        transform: translateY(100vh) scale(0);
      }
      50% {
        opacity: 1;
        transform: translateY(50vh) scale(1);
      }
      100% {
        opacity: 0;
        transform: translateY(-20vh) scale(0.5);
      }
    }
    /* Novas partículas de "estrelas" para efeito de warp speed */
    .warp-stars {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      perspective: 800px;
    }
    .warp-star {
      position: absolute;
      width: 2px;
      height: 2px;
      background: var(--text-primary);
      border-radius: 50%;
      opacity: 0;
      transform-style: preserve-3d;
      animation: starWarp 2s ease-in-out forwards;
    }
    @keyframes starWarp {
      0% {
        opacity: 1;
        transform: translate3d(0, 0, -800px) scale(0.5);
      }
      50% {
        opacity: 1;
        transform: translate3d(0, 0, 0) scale(1);
      }
      100% {
        opacity: 0;
        transform: translate3d(0, 0, 800px) scale(1.5);
      }
    }
    /* Efeito de distorção de tela (como ondulações no tempo) */
    .time-warp-distortion {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, transparent 40%, rgba(79, 195, 247, 0.15) 60%, transparent 80%);
      opacity: 0;
      animation: distortionPulse 1.5s ease-in-out infinite;
    }
    @keyframes distortionPulse {
      0% { opacity: 0; transform: scale(0.5); }
      50% { opacity: 0.3; transform: scale(1.2); }
      100% { opacity: 0; transform: scale(1.5); }
    }
    /* Túnel de tempo com linhas convergentes */
    .time-warp-tunnel {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 400px;
      height: 400px;
      opacity: 0;
      perspective: 600px;
    }
    .tunnel-line {
      position: absolute;
      width: 2px;
      height: 200px;
      background: linear-gradient(to bottom, transparent, var(--accent-light), transparent);
      transform-origin: center bottom;
      animation: tunnelConverge 1.5s linear infinite;
    }
    @keyframes tunnelConverge {
      0% { transform: rotate(var(--rot)) translateZ(0) scaleY(0.2); opacity: 0.2; }
      100% { transform: rotate(var(--rot)) translateZ(-600px) scaleY(1.5); opacity: 0; }
    }
    /* Engrenagens girando no efeito de viagem no tempo */
    .time-warp-gears {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .time-warp-overlay.active .time-warp-gears {
      opacity: 1;
    }
    .gear {
      position: absolute;
      color: var(--accent-light);
      text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
      opacity: 0.5;
      animation: none;
      z-index: 1;
    }
    .time-warp-overlay.active .gear {
      animation: spinGear 2s linear infinite;
    }
    .gear.large { font-size: 80px; }
    /* Posições das engrenagens perto do relógio */
    .left-gear {
      top: 50%;
      left: 35%;
      transform: translate(-50%, -50%);
      animation-direction: normal;
    }
    .right-gear {
      top: 50%;
      right: 35%;
      transform: translate(50%, -50%);
      animation-direction: reverse;
    }
    @keyframes spinGear {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    .right-gear {
      animation-name: spinGearReverse;
    }
    @keyframes spinGearReverse {
      0% { transform: translate(50%, -50%) rotate(0deg); }
      100% { transform: translate(50%, -50%) rotate(-360deg); }
    }
    .quiz-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap; gap: 10px; }
    .quiz-title { color: var(--text-primary); font-size: 18px; font-weight: 700; }
    .progress-container { height: 8px; background: rgba(255,255,255,0.05); border-radius: 6px; margin: 12px 0; overflow: hidden; }
    .progress-bar { height: 100%; background: var(--timeline-progress); border-radius: 6px; width: 0%; transition: width 0.45s ease; }
    .question-container { margin: 10px 0; }
    .question-number { color: var(--accent); font-weight: 700; margin-bottom: 6px; }
    .question-text { color: var(--text-primary); font-size: 15px; margin-bottom: 12px; line-height: 1.4; }
    .options-container { display: grid; gap: 10px; }
    .option { padding: 12px 14px; border-radius: 10px; background: rgba(255,255,255,0.02); border: 1px solid var(--card-border); color: var(--text-secondary); font-weight: 600; cursor: pointer; transition: var(--transition); display: flex; align-items: center; gap: 10px; }
    .option:hover { background: rgba(173, 216, 230, 0.04); transform: translateX(4px); color: var(--text-primary); }
    .option.selected { background: rgba(79, 195, 247, 0.08); border-color: var(--accent); color: var(--text-primary); box-shadow: 0 0 10px rgba(79,195,247,0.08); }
    .option.correct { background: rgba(74, 222, 128, 0.08); border-color: var(--success); color: #d1fae5; }
    .option.wrong { background: rgba(248, 113, 113, 0.08); border-color: var(--error); color: #fee2e2; }
    .option-letter { display: flex; align-items: center; justify-content: center; width: 28px; height: 28px; border-radius: 50%; background: rgba(255,255,255,0.04); font-weight: 800; font-size: 12px; }
    .quiz-controls { display: flex; justify-content: space-between; margin-top: 14px; flex-wrap: wrap; gap: 10px; }
    .nav-buttons { display: flex; gap: 8px; }
    .score-display { font-weight: 800; font-size: 15px; color: var(--accent); display: flex; align-items: center; gap: 8px; }
    footer { margin-top: 22px; padding: 14px; text-align: center; color: var(--text-secondary); font-size: 12px; border-top: 1px solid var(--card-border); }
    @media (max-width: 768px) {
      .logo { width: 60px; height: 60px; font-size: 18px; }
      h1 { font-size: 20px; letter-spacing: -0.4px; }
      .subtitle { font-size: 13px; }
      .quiz-controls { width: 100%; flex-direction: column; align-items: center; }
      .nav-buttons, .score-display { width: 100%; justify-content: center; }
      .btn, .ghost { width: auto; padding: 8px 12px; font-size: 12px; }
      .timeline-track { height: 110px; }
      .event { min-width: 68px; padding: 0 6px; }
      .event-year { font-size: 13px; }
      .event-name { font-size: 11px; }
      .timeline-events { gap: 12px; padding: 0 12px; }
      .gear.large { font-size: 60px !important; }
      .left-gear { left: 30% !important; }
      .right-gear { right: 30% !important; }
    }
    @media (max-width: 480px) {
      .container { padding: 12px; }
      .logo { width: 50px; height: 50px; font-size: 16px; }
      h1 { font-size: 18px; letter-spacing: -0.4px; }
      .subtitle { font-size: 12px; }
      .btn, .ghost { padding: 6px 10px; font-size: 11px; }
      .timeline-track { height: 92px; }
      .event { min-width: 50px; padding: 0 4px; }
      .event-year { font-size: 11px; }
      .event-name { font-size: 9px; white-space: normal; max-width: 60px; }
      .timeline-events { gap: 10px; padding: 0 10px; }
      .gear.large { font-size: 40px !important; }
      .left-gear { left: 25% !important; }
      .right-gear { right: 25% !important; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header role="banner">
      <div class="logo" aria-hidden="true">H→Net</div>
      <div class="header-content">
        <h1>História das Redes de Computadores</h1>
        <p class="subtitle">Explore a evolução que ligou instituições, pessoas e informações da comutação de pacotes à internet global.</p>
      </div>
    </header>
    <main class="main-content" role="main">
      <section class="timeline-section" aria-labelledby="timeline-title">
        <div class="timeline-header">
          <h2 class="timeline-title" id="timeline-title">Linha do Tempo Histórica</h2>
          <div class="event-year-display">Ano: <span id="current-year">1969</span></div>
        </div>
        <div class="timeline-track" aria-hidden="false">
          <div class="timeline-line" aria-hidden="true"></div>
          <div class="timeline-events" id="timeline-events" role="list">
            <div class="event active" data-id="arpanet" role="button" tabindex="0" aria-pressed="true">
              <div class="event-dot"><div class="event-dot-inner"></div></div>
              <div class="event-year">1969</div>
              <div class="event-name">ARPANET</div>
            </div>
            <div class="event" data-id="email" role="button" tabindex="0" aria-pressed="false">
              <div class="event-dot"><div class="event-dot-inner"></div></div>
              <div class="event-year">1971</div>
              <div class="event-name">E-mail</div>
            </div>
            <div class="event" data-id="ethernet" role="button" tabindex="0" aria-pressed="false">
              <div class="event-dot"><div class="event-dot-inner"></div></div>
              <div class="event-year">1973</div>
              <div class="event-name">Ethernet</div>
            </div>
            <div class="event" data-id="tcpip" role="button" tabindex="0" aria-pressed="false">
              <div class="event-dot"><div class="event-dot-inner"></div></div>
              <div class="event-year">1983</div>
              <div class="event-name">TCP/IP</div>
            </div>
            <div class="event" data-id="www" role="button" tabindex="0" aria-pressed="false">
              <div class="event-dot"><div class="event-dot-inner"></div></div>
              <div class="event-year">1990</div>
              <div class="event-name">World Wide Web</div>
            </div>
          </div>
        </div>
        <div class="event-details" aria-live="polite" id="event-details">
          <h3 class="event-title" id="event-title"><i class="fas fa-network-wired" aria-hidden="true"></i> ARPANET (1969)</h3>
          <p class="event-description" id="event-description">
            Financiada pela ARPA (agora DARPA), a ARPANET foi lançada em outubro de 1969 com a conexão inicial entre a Universidade da Califórnia em Los Angeles (UCLA) e o Stanford Research Institute (SRI), utilizando interfaces de mensagem de processador (IMPs) para roteamento inicial. Esse marco inicial focou em conectar centros de pesquisa acadêmicos e governamentais, promovendo colaboração em tempo de guerra fria, e introduziu conceitos como fragmentação de dados em pacotes independentes, que permitiam rotas alternativas em caso de falhas, uma inovação chave para resiliência de rede.
          </p>
        </div>
      </section>
      <aside class="quiz-section" aria-labelledby="quiz-title">
        <div class="quiz-header">
          <h2 class="quiz-title" id="quiz-title">Quiz Interativo</h2>
          <div class="score-display" id="score-display"><i class="fas fa-graduation-cap" aria-hidden="true"></i> <span id="score">0/10</span></div>
        </div>
        <div class="progress-container" aria-hidden="false">
          <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="question-container" id="question-container"></div>
        <div class="quiz-controls">
          <div class="nav-buttons">
            <button id="prev" class="ghost" aria-label="Pergunta anterior"><i class="fas fa-arrow-left" aria-hidden="true"></i></button>
            <button id="next" class="btn" aria-label="Próxima pergunta"><i class="fas fa-arrow-right" aria-hidden="true"></i></button>
          </div>
          <button id="submit" class="btn" aria-label="Enviar respostas"><i class="fas fa-paper-plane" aria-hidden="true"></i> Enviar</button>
        </div>
      </aside>
    </main>
    <footer role="contentinfo">
      <p>Atalhos: ← / → — Navegar perguntas</p>
    </footer>
  </div>
  <div class="time-warp-overlay" id="timeWarpOverlay">
    <div class="time-warp-grid"></div>
    <div class="warp-particles" id="warpParticles"></div>
    <div class="warp-stars" id="warpStars"></div>
    <div class="time-warp-distortion"></div>
    <div class="time-warp-tunnel" id="timeWarpTunnel"></div>
    <div class="time-warp-gears">
      <i class="fas fa-cog gear large left-gear" aria-hidden="true"></i>
      <i class="fas fa-cog gear large right-gear" aria-hidden="true"></i>
    </div>
    <div class="time-warp-clock" id="timeWarpClock">
      <div class="clock-face">
        <!-- Marcas do relógio (12 marcas principais) -->
        <div class="clock-mark major" style="--rotation: 0deg;"></div>
        <div class="clock-mark major" style="--rotation: 30deg;"></div>
        <div class="clock-mark major" style="--rotation: 60deg;"></div>
        <div class="clock-mark major" style="--rotation: 90deg;"></div>
        <div class="clock-mark major" style="--rotation: 120deg;"></div>
        <div class="clock-mark major" style="--rotation: 150deg;"></div>
        <div class="clock-mark major" style="--rotation: 180deg;"></div>
        <div class="clock-mark major" style="--rotation: 210deg;"></div>
        <div class="clock-mark major" style="--rotation: 240deg;"></div>
        <div class="clock-mark major" style="--rotation: 270deg;"></div>
        <div class="clock-mark major" style="--rotation: 300deg;"></div>
        <div class="clock-mark major" style="--rotation: 330deg;"></div>
        <!-- Números do relógio -->
        <div class="clock-number" style="--rotation: 0deg;">12</div>
        <div class="clock-number" style="--rotation: 30deg;">1</div>
        <div class="clock-number" style="--rotation: 60deg;">2</div>
        <div class="clock-number" style="--rotation: 90deg;">3</div>
        <div class="clock-number" style="--rotation: 120deg;">4</div>
        <div class="clock-number" style="--rotation: 150deg;">5</div>
        <div class="clock-number" style="--rotation: 180deg;">6</div>
        <div class="clock-number" style="--rotation: 210deg;">7</div>
        <div class="clock-number" style="--rotation: 240deg;">8</div>
        <div class="clock-number" style="--rotation: 270deg;">9</div>
        <div class="clock-number" style="--rotation: 300deg;">10</div>
        <div class="clock-number" style="--rotation: 330deg;">11</div>
        <!-- Ponteiros -->
        <div class="clock-hand hour-hand"></div>
        <div class="clock-hand minute-hand"></div>
        <div class="clock-hand second-hand"></div>
        <div class="clock-center"></div>
        <div class="time-text" id="timeText"></div>
      </div>
    </div>
  </div>
  <canvas id="confetti" style="position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:1200"></canvas>
  <audio id="warpSound" preload="auto">
    <source src="data:audio/mpeg;base64,/+MYxAAAAANIAAAAAExBTUUzLjk4LjIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" type="audio/mpeg">
  </audio>
  <script>
    // ---------- Detecção e Aplicação de Tema ----------
    function applyTheme(theme) {
      const root = document.documentElement;
      root.className = theme === 'blue' ? '' : `theme-${theme}`;
      localStorage.setItem('theme', theme);
      // Atualiza grid de warp para tema
      const grid = document.querySelector('.time-warp-grid');
      if (grid) {
        const accent = getComputedStyle(root).getPropertyValue('--accent').trim();
        grid.style.backgroundImage = `
          linear-gradient(rgba(${hexToRgb(accent, 0.08)} 1px, transparent 1px),
          linear-gradient(90deg, rgba(${hexToRgb(accent, 0.08)} 1px, transparent 1px)
        )`;
      }
      // Atualiza clock background para tema
      const clock = document.getElementById('timeWarpClock');
      if (clock) {
        const accent = getComputedStyle(root).getPropertyValue('--accent').trim();
        const accentLight = getComputedStyle(root).getPropertyValue('--accent-light').trim();
        clock.style.background = `linear-gradient(135deg, ${accentLight}, ${accent}, rgba(${hexToRgb(accent, 0.6)}))`;
      }
    }
    function hexToRgb(hex, alpha = 1) {
      const r = parseInt(hex.slice(1, 3), 16);
      const g = parseInt(hex.slice(3, 5), 16);
      const b = parseInt(hex.slice(5, 7), 16);
      return `${r}, ${g}, ${b}${alpha !== 1 ? `, ${alpha}` : ''}`;
    }
    // Carrega tema salvo
    const savedTheme = localStorage.getItem('theme') || 'blue';
    applyTheme(savedTheme);
    // Listener para mudanças de tema (se alterado em outra aba)
    window.addEventListener('storage', (e) => {
      if (e.key === 'theme') applyTheme(e.newValue);
    });
    // ---------- Animação de viagem no tempo futurista aprimorada ----------
    const timeWarpOverlay = document.getElementById('timeWarpOverlay');
    const timeWarpClock = document.getElementById('timeWarpClock');
    const timeText = document.getElementById('timeText');
    const warpParticles = document.getElementById('warpParticles');
    const warpStars = document.getElementById('warpStars');
    const timeWarpTunnel = document.getElementById('timeWarpTunnel');
    const warpSound = document.getElementById('warpSound');
    const eventDetails = document.getElementById('event-details');
    function createParticles() {
      warpParticles.innerHTML = '';
      for (let i = 0; i < 50; i++) { // Aumentado para mais partículas
        const particle = document.createElement('div');
        particle.className = 'warp-particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 0.5 + 's';
        particle.style.animationDuration = (Math.random() * 1 + 1.5) + 's';
        warpParticles.appendChild(particle);
      }
    }
    function createStars() {
      warpStars.innerHTML = '';
      for (let i = 0; i < 100; i++) { // Estrelas para warp speed
        const star = document.createElement('div');
        star.className = 'warp-star';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.animationDelay = Math.random() * 0.5 + 's';
        warpStars.appendChild(star);
      }
    }
    function createTunnelLines() {
      timeWarpTunnel.innerHTML = '';
      for (let i = 0; i < 24; i++) { // Linhas convergentes para túnel
        const line = document.createElement('div');
        line.className = 'tunnel-line';
        line.style.setProperty('--rot', `${i * 15}deg`);
        line.style.animationDelay = `${i * 0.05}s`;
        timeWarpTunnel.appendChild(line);
      }
      timeWarpTunnel.style.opacity = 1;
      setTimeout(() => { timeWarpTunnel.style.opacity = 0; }, 1500);
    }
    function triggerTimeTravel(directionText) {
      createParticles(); // Gerar partículas
      createStars(); // Gerar estrelas para warp
      createTunnelLines(); // Gerar túnel
      timeText.textContent = directionText;
      // Fade out do conteúdo atual com distorção
      eventDetails.classList.add('time-traveling');
      // Ativar overlay e relógio
      timeWarpOverlay.classList.add('active');
      timeWarpClock.classList.add('active');
      // Tocar som de warp (gerar som sintético se não houver áudio)
      if (warpSound) warpSound.play();
      else playWarpSound();
      // Vibração haptic se suportado
      if (navigator.vibrate) navigator.vibrate([200, 100, 200]);
      setTimeout(() => {
        // Desativar overlay
        timeWarpOverlay.classList.remove('active');
        timeWarpClock.classList.remove('active');
        timeText.textContent = '';
        // Atualizar conteúdo (será chamado por selectEvent)
        // Depois, fade in com emergência
        eventDetails.classList.remove('time-traveling');
        eventDetails.classList.add('emerging');
        setTimeout(() => {
          eventDetails.classList.remove('emerging');
        }, 1000);
      }, 2000); // Aumentado para mais imersão
    }
    function playWarpSound() {
      const AudioCtx = window.AudioContext || window.webkitAudioContext;
      if (!AudioCtx) return;
      const audioCtx = new AudioCtx();
      const oscillator = audioCtx.createOscillator();
      const gainNode = audioCtx.createGain();
      oscillator.connect(gainNode);
      gainNode.connect(audioCtx.destination);
      oscillator.type = 'sine';
      oscillator.frequency.setValueAtTime(100, audioCtx.currentTime);
      oscillator.frequency.exponentialRampToValueAtTime(800, audioCtx.currentTime + 1.5);
      gainNode.gain.value = 0.2;
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 2);
      oscillator.start();
      oscillator.stop(audioCtx.currentTime + 2);
    }
    // --- Dados ---
    const events = {
      arpanet: { title: 'ARPANET (1969)', year: 1969, icon: 'fa-network-wired', text: 'Financiada pela ARPA (agora DARPA), a ARPANET foi lançada em outubro de 1969 com a conexão inicial entre a Universidade da Califórnia em Los Angeles (UCLA) e o Stanford Research Institute (SRI), utilizando interfaces de mensagem de processador (IMPs) para roteamento inicial. Esse marco inicial focou em conectar centros de pesquisa acadêmicos e governamentais, promovendo colaboração em tempo de guerra fria, e introduziu conceitos como fragmentação de dados em pacotes independentes, que permitiam rotas alternativas em caso de falhas, uma inovação chave para resiliência de rede.', tts: 'ARPANET, iniciada em mil novecentos e sessenta e nove, introduziu a comutação de pacotes e conectou universidades, criando a base da internet.' },
      email: { title: 'E‑mail (1971)', year: 1971, icon: 'fa-envelope', text: 'Desenvolvido por Ray Tomlinson enquanto trabalhava na BBN Technologies, o primeiro e-mail foi enviado em 1971 sobre a ARPANET, introduzindo o símbolo @ para separar o nome do usuário do host, permitindo endereçamento remoto preciso e transformando a comunicação em rede ao possibilitar mensagens assíncronas que podiam ser lidas a qualquer momento, independentemente da disponibilidade simultânea dos remetentes e destinatários, o que acelerou drasticamente a colaboração científica e técnica entre equipes distribuídas.', tts: 'O email, surgido em mil novecentos e setenta e um, tornou a comunicação em rede simples e amplamente usada.' },
      ethernet: { title: 'Ethernet (1973)', year: 1973, icon: 'fa-ethernet', text: 'Criada por Robert Metcalfe e sua equipe no Xerox PARC, a Ethernet surgiu em 1973 como uma solução para redes locais (LANs), utilizando um cabo coaxial compartilhado onde múltiplos dispositivos competiam pelo acesso ao meio usando o protocolo CSMA/CD (Carrier Sense Multiple Access with Collision Detection), que detectava colisões de dados e retransmitia automaticamente para evitar perdas, permitindo velocidades iniciais de 2.94 Mbps em ambientes de escritório e laboratórios, e pavimentando o caminho para padronizações IEEE 802.3 que se tornariam ubíquas.', tts: 'Ethernet, desenvolvida por Robert Metcalfe, tornou possível criar redes locais confiáveis com cabeamento compartilhado.' },
      tcpip: { title: 'TCP/IP (1983)', year: 1983, icon: 'fa-layer-group', text: 'Embora a especificação inicial do TCP tenha sido publicada em 1974 por Vint Cerf e Bob Kahn como uma suíte de protocolos para interconectar redes heterogêneas, foi em 1º de janeiro de 1983 — conhecido como "Flag Day" — que a ARPANET migrou completamente para o TCP/IP, dividindo o TCP em camadas separadas de transporte (TCP) e rede (IP) para maior eficiência, permitindo que diferentes tipos de redes se comunicassem de forma padronizada e escalável, o que catalisou a transição da ARPANET para a Internet moderna, conectando universidades, agências governamentais e, eventualmente, o público geral.', tts: 'Em mil novecentos e oitenta e três, o TCP sobre IP tornou-se padrão e permitiu que redes heterogêneas se comunicassem.' },
      www: { title: 'World Wide Web (1989/1990)', year: 1990, icon: 'fa-globe', text: 'Proposta por Tim Berners-Lee em março de 1989 enquanto trabalhava no CERN, a World Wide Web (WWW) foi implementada em 1990 com o desenvolvimento do primeiro navegador web (WorldWideWeb) e servidor HTTP, utilizando HTML para estruturar documentos hipertextuais, HTTP para transferir dados entre cliente e servidor, e URLs para localizar recursos na rede, facilitando a navegação intuitiva por meio de links clicáveis e democratizando o acesso à informação, transformando a Internet de uma ferramenta acadêmica em uma plataforma global acessível a qualquer um com um computador e conexão.', tts: 'A World Wide Web, proposta no final dos anos oitenta, criou as bases para a navegação simples que usamos hoje.' }
    };
    const quiz = [
      { q: 'Em que ano a ARPANET foi iniciada?', opts: ['1959', '1969', '1979'], a: 1, explain: 'A ARPANET foi conectada em 29 de outubro de 1969, marcando o início das redes modernas com a primeira mensagem entre UCLA e SRI.' },
      { q: 'Quem é associado à criação da Ethernet?', opts: ['Tim Berners‑Lee', 'Vint Cerf', 'Robert Metcalfe'], a: 2, explain: 'Robert Metcalfe desenvolveu a Ethernet em 1973 no Xerox PARC, padronizando redes locais com CSMA/CD.' },
      { q: 'Em que ano o TCP/IP foi adotado como padrão na ARPANET?', opts: ['1983', '1991', '1975'], a: 0, explain: 'Em 1º de janeiro de 1983 (flag day), a ARPANET migrou para TCP/IP, unificando protocolos para a Internet.' },
      { q: 'Qual tecnologia permitiu a navegação por documentos ligados (WWW)?', opts: ['DNS', 'HTTP/HTML', 'SMTP'], a: 1, explain: 'HTTP e HTML, criados por Tim Berners-Lee, permitem transferir e formatar páginas com hiperlinks na WWW.' },
      { q: 'O que o e‑mail permitiu nas redes?', opts: ['Transferir arquivos fisicamente', 'Enviar mensagens entre usuários', 'Conectar redes diferentes'], a: 1, explain: 'O e-mail, inventado por Ray Tomlinson em 1971, habilitou comunicação assíncrona de texto via @ entre usuários remotos.' },
      { q: 'Quem é considerado o inventor do e-mail?', opts: ['Vint Cerf', 'Ray Tomlinson', 'Tim Berners-Lee'], a: 1, explain: 'Ray Tomlinson enviou o primeiro e-mail em 1971, introduzindo o uso do @ para endereçamento.' },
      { q: 'Em que ano foi proposto o conjunto de protocolos TCP/IP?', opts: ['1969', '1974', '1983'], a: 1, explain: 'Vint Cerf e Bob Kahn publicaram a especificação do TCP em 1974, que evoluiu para TCP/IP.' },
      { q: 'Quem propôs a World Wide Web?', opts: ['Robert Metcalfe', 'Tim Berners-Lee', 'Donald Davies'], a: 1, explain: 'Tim Berners-Lee propôs a WWW em 1989 no CERN, com HTTP, HTML e primeiro browser em 1990.' },
      { q: 'O que a ARPANET inicialmente conectou?', opts: ['Empresas comerciais', 'Universidades e centros de pesquisa', 'Redes domésticas'], a: 1, explain: 'ARPANET conectou UCLA, Stanford Research Institute e outros centros de pesquisa financiados pela ARPA.' },
      { q: 'Qual o principal inovação da Ethernet?', opts: ['Comutação de pacotes', 'CSMA/CD para detecção de colisões', 'Endereçamento IP'], a: 1, explain: 'Ethernet usa CSMA/CD para gerenciar acesso compartilhado ao cabo em LANs.' }
    ];
    // --- DOM ---
    const eventTitle = document.getElementById('event-title');
    const eventDescription = document.getElementById('event-description');
    const currentYear = document.getElementById('current-year');
    const questionContainer = document.getElementById('question-container');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');
    const submitBtn = document.getElementById('submit');
    const scoreSpan = document.getElementById('score');
    const progressBar = document.getElementById('progress-bar');
    const timelineEvents = document.getElementById('timeline-events');
    const scoreDisplay = document.getElementById('score-display');
    // --- Estado ---
    let currentEvent = 'arpanet';
    const QUIZ_KEY = 'quiz_history_submitted_at';
    let currentQuestion = 0;
    let answers = JSON.parse(localStorage.getItem('quiz_history_answers')) || new Array(quiz.length).fill(null);
    let quizSubmitted = localStorage.getItem(QUIZ_KEY) !== null;
    // --- Inicialização ---
    document.addEventListener('DOMContentLoaded', () => {
      updateEventDisplay();
      setupEventListeners();
      if (quizSubmitted && !canRetake()) {
        submitBtn.click();
      } else {
        renderQuestion();
        updateProgress();
      }
      updateRetakeButton();
    });
    // Atualiza exibição de evento
    function updateEventDisplay() {
      const ev = events[currentEvent];
      eventTitle.innerHTML = `<i class="fas ${ev.icon}" aria-hidden="true"></i> ${ev.title}`;
      eventDescription.textContent = ev.text;
      currentYear.textContent = ev.year;
      document.querySelectorAll('.event').forEach(el => {
        const isActive = el.dataset.id === currentEvent;
        el.classList.toggle('active', isActive);
        el.setAttribute('aria-pressed', isActive ? 'true' : 'false');
      });
    }
    function canRetake() {
      const submittedAt = localStorage.getItem(QUIZ_KEY);
      if (!submittedAt) return true;
      const now = Date.now();
      const diffMinutes = (now - parseInt(submittedAt)) / (1000 * 60);
      return diffMinutes >= 10;
    }
    function updateRetakeButton() {
      const existing = document.getElementById('retake-btn');
      if (existing) existing.remove();
      if (quizSubmitted && !canRetake()) {
        const retakeBtn = document.createElement('button');
        retakeBtn.id = 'retake-btn';
        retakeBtn.className = 'btn';
        retakeBtn.disabled = true;
        retakeBtn.innerHTML = '<i class="fas fa-clock" aria-hidden="true"></i> Aguarde...';
        document.querySelector('.quiz-controls').appendChild(retakeBtn);
        const countdown = setInterval(() => {
          const submittedAt = localStorage.getItem(QUIZ_KEY);
          const now = Date.now();
          const remaining = 10 - Math.floor((now - parseInt(submittedAt)) / (1000 * 60));
          if (remaining <= 0) {
            clearInterval(countdown);
            updateRetakeButton();
          } else {
            retakeBtn.innerHTML = `<i class="fas fa-clock" aria-hidden="true"></i> Refazer em ${remaining} min`;
          }
        }, 1000);
      } else if (quizSubmitted && canRetake()) {
        const retakeBtn = document.createElement('button');
        retakeBtn.id = 'retake-btn';
        retakeBtn.className = 'btn';
        retakeBtn.innerHTML = '<i class="fas fa-redo" aria-hidden="true"></i> Refazer Quiz';
        retakeBtn.addEventListener('click', resetQuiz);
        document.querySelector('.quiz-controls').appendChild(retakeBtn);
      }
    }
    function resetQuiz() {
      localStorage.removeItem('quiz_history_answers');
      localStorage.removeItem(QUIZ_KEY);
      answers = new Array(quiz.length).fill(null);
      currentQuestion = 0;
      quizSubmitted = false;
      renderQuestion();
      updateProgress();
      updateRetakeButton();
      const scoreDisplay = document.getElementById('score-display');
      scoreDisplay.innerHTML = `<i class="fas fa-graduation-cap" aria-hidden="true"></i> <span id="score">0/10</span>`;
      document.getElementById('score').textContent = '0/10';
    }
    // Questões
    function renderQuestion() {
      if (quizSubmitted && !canRetake()) return;
      const q = quiz[currentQuestion];
      questionContainer.innerHTML = `
        <div class="question-number">Pergunta ${currentQuestion + 1} de ${quiz.length}</div>
        <div class="question-text">${q.q}</div>
        <div class="options-container" id="options-container"></div>
      `;
      const optionsContainer = document.getElementById('options-container');
      q.opts.forEach((opt, idx) => {
        const option = document.createElement('div');
        option.className = 'option';
        option.setAttribute('role','button');
        option.setAttribute('tabindex','0');
        option.setAttribute('aria-pressed', String(answers[currentQuestion] === idx));
        if (answers[currentQuestion] === idx) option.classList.add('selected');
        option.innerHTML = `<div class="option-letter">${String.fromCharCode(65 + idx)}</div><div>${opt}</div>`;
        option.dataset.index = idx;
        optionsContainer.appendChild(option);
      });
      prevBtn.disabled = currentQuestion === 0;
      nextBtn.disabled = currentQuestion === quiz.length - 1;
      const answered = answers.filter(a => a !== null).length;
      scoreSpan.textContent = `${answered}/${quiz.length}`;
    }
    function updateProgress() {
      const answered = answers.filter(a => a !== null).length;
      const percentage = (answered / quiz.length) * 100;
      progressBar.style.width = `${percentage}%`;
    }
    // Ouvintes
    function setupEventListeners() {
      // Linha do tempo: clique + teclado
      document.querySelectorAll('.event').forEach(eventEl => {
        eventEl.addEventListener('click', () => selectEvent(eventEl));
        eventEl.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); selectEvent(eventEl); } });
      });
      // Opções do quiz (delegation dentro do container)
      document.addEventListener('click', (e) => {
        if (quizSubmitted && !canRetake()) return;
        const option = e.target.closest('.option');
        if (!option) return;
        const idx = parseInt(option.dataset.index, 10);
        answers[currentQuestion] = idx;
        localStorage.setItem('quiz_history_answers', JSON.stringify(answers));
        renderQuestion();
        updateProgress();
      });
      document.addEventListener('keydown', (e) => {
        const option = e.target.closest('.option');
        if (!option) return;
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); option.click(); }
      });
      prevBtn.addEventListener('click', () => {
        if (quizSubmitted && !canRetake()) return;
        if (currentQuestion > 0) { currentQuestion--; renderQuestion(); }
      });
      nextBtn.addEventListener('click', () => {
        if (quizSubmitted && !canRetake()) return;
        if (currentQuestion < quiz.length - 1) { currentQuestion++; renderQuestion(); }
      });
      submitBtn.addEventListener('click', () => {
        if (quizSubmitted && !canRetake()) return;
        if (answers.some(a => a === null)) { alert('Por favor, responda todas as perguntas antes de enviar.'); return; }
        localStorage.setItem(QUIZ_KEY, Date.now().toString());
        quizSubmitted = true;
        let correct = 0;
        for (let i = 0; i < quiz.length; i++) if (answers[i] === quiz[i].a) correct++;
        document.getElementById('score-display').innerHTML = `<i class="fas fa-trophy" aria-hidden="true"></i> ${correct}/${quiz.length}`;
        const reviewRoot = document.createElement('div');
        quiz.forEach((item, qIndex) => {
          const block = document.createElement('div');
          const h = document.createElement('div');
          h.style.fontWeight = '700';
          h.style.marginBottom = '12px';
          h.style.color = 'var(--text-primary)';
          h.textContent = `${qIndex+1}. ${item.q}`;
          block.appendChild(h);
          const opts = document.createElement('div');
          opts.style.display = 'grid';
          opts.style.gap = '8px';
          opts.style.marginBottom = '12px';
          item.opts.forEach((op, optIndex) => {
            const o = document.createElement('div');
            o.className = 'option';
            o.style.cursor = 'default';
            o.style.pointerEvents = 'none';
            o.innerHTML = `<div class="option-letter">${String.fromCharCode(65 + optIndex)}</div><div>${op}</div>`;
            if (optIndex === item.a) o.classList.add('correct');
            else if (answers[qIndex] === optIndex) o.classList.add('wrong');
            opts.appendChild(o);
          });
          block.appendChild(opts);
          const explain = document.createElement('div');
          explain.style.fontSize = '14px';
          explain.style.color = 'var(--success)';
          explain.style.fontStyle = 'italic';
          explain.style.marginTop = '8px';
          explain.textContent = item.explain;
          block.appendChild(explain);
          reviewRoot.appendChild(block);
        });
        questionContainer.innerHTML = '';
        questionContainer.appendChild(reviewRoot);
        updateRetakeButton();
        if (correct === quiz.length) {
          showSuccessToast();
          launchConfetti();
          playSound('success');
        } else {
          playSound('error');
        }
      });
    }
    function selectEvent(el) {
      if (el.dataset.id === currentEvent) return; // Evita animação se já ativo
      const newYear = parseInt(events[el.dataset.id].year);
      const currentYearNum = parseInt(events[currentEvent].year);
      const directionText = newYear < currentYearNum ? 'Voltando no tempo' : 'Avançando no tempo';
      triggerTimeTravel(directionText); // Inicia animação aprimorada
      setTimeout(() => {
        currentEvent = el.dataset.id;
        updateEventDisplay();
      }, 1000); // Ajustado para sincronizar com a animação
    }
    // Efeitos sonoros (compatibilidade)
    function playSound(type) {
      const AudioCtx = window.AudioContext || window.webkitAudioContext;
      if (!AudioCtx) return; // se não suportado, silenciosamente ignora
      const audioCtx = new AudioCtx();
      const oscillator = audioCtx.createOscillator();
      const gainNode = audioCtx.createGain();
      oscillator.connect(gainNode); gainNode.connect(audioCtx.destination);
      switch(type) {
        case 'success': oscillator.type = 'sine'; oscillator.frequency.setValueAtTime(660, audioCtx.currentTime); oscillator.frequency.exponentialRampToValueAtTime(990, audioCtx.currentTime + 0.32); gainNode.gain.value = 0.15; gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.45); break;
        case 'error': oscillator.type = 'triangle'; oscillator.frequency.value = 260; gainNode.gain.value = 0.12; gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.28); break;
      }
      oscillator.start(); oscillator.stop(audioCtx.currentTime + (type === 'success' ? 0.45 : 0.22));
    }
    // Toast
    function showSuccessToast() {
      const toast = document.createElement('div');
      toast.style.position = 'fixed';
      toast.style.top = '16px';
      toast.style.left = '50%';
      toast.style.transform = 'translateX(-50%)';
      toast.style.padding = '12px 18px';
      toast.style.borderRadius = '12px';
      toast.style.background = 'linear-gradient(90deg, var(--success), #34d399)';
      toast.style.color = 'var(--bg-900)';
      toast.style.fontWeight = '800';
      toast.style.zIndex = 1000;
      toast.innerHTML = '<i class="fas fa-star" aria-hidden="true"></i> Parabéns! Você acertou todas as questões!';
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }
    // Confetti tema-aware
    const confettiCanvas = document.getElementById('confetti');
    const confettiCtx = confettiCanvas.getContext('2d');
    function resizeCanvas() { confettiCanvas.width = window.innerWidth; confettiCanvas.height = window.innerHeight; }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
    let confettiPieces = [];
    function launchConfetti() {
      confettiPieces = [];
      // Pega cores do CSS (fallback para default)
      const root = document.documentElement;
      let colorsStr = getComputedStyle(root).getPropertyValue('--confetti-colors') || '#4fc3f7,#b3e5fc,#d1e8e2';
      const colors = colorsStr.split(',').map(c => c.trim().replace(/['"]/g, ''));
      for (let i = 0; i < 120; i++) {
        confettiPieces.push({
          x: Math.random() * confettiCanvas.width,
          y: -20,
          r: 3 + Math.random() * 8,
          vx: -3 + Math.random() * 6,
          vy: 2 + Math.random() * 6,
          rot: Math.random() * 360,
          vr: -0.1 + Math.random() * 0.2,
          color: colors[i % colors.length]
        });
      }
      requestAnimationFrame(drawConfetti);
      setTimeout(() => { confettiPieces = []; confettiCtx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height); }, 3200);
    }
    function drawConfetti() {
      confettiCtx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
      confettiPieces.forEach(p => {
        p.x += p.vx; p.y += p.vy; p.vy += 0.12; p.rot += p.vr;
        confettiCtx.save();
        confettiCtx.translate(p.x,p.y);
        confettiCtx.rotate((p.rot*Math.PI)/180);
        confettiCtx.fillStyle = p.color;
        confettiCtx.fillRect(-p.r/2,-p.r/2,p.r,p.r*0.6);
        confettiCtx.restore();
      });
      if (confettiPieces.length) requestAnimationFrame(drawConfetti);
    }
    window.addEventListener('keydown', e => {
      if (e.key === 'ArrowLeft') prevBtn.click();
      if (e.key === 'ArrowRight') nextBtn.click();
    });
  </script>
</body>
</html>